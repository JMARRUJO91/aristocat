# This is the configuration file for Travis CI, an online continuous integration service.
language: cpp
sudo: required
dist: trusty
addons:
  apt:
    packages:
    - libhdf5-openmpi-dev
    - libopenmpi-dev
    - petsc-dev
    - libcppunit-dev

before_install:
  #- export NUM_THREADS=1
  ## Installation of a newer version of CMake
  #- wget https://cmake.org/files/v3.3/cmake-3.3.2-Linux-x86_64.tar.gz --no-check-certificate
  #- tar -zxf cmake-3.3.2-Linux-x86_64.tar.gz
  #- cmake-3.3.2-Linux-x86_64/bin/cmake --version
  - cmake --version
  ## Installation of newer version of HDF5
  #- wget http://www.hdfgroup.org/ftp/HDF5/current/src/hdf5-1.8.14.tar.gz
  #- tar -zxf hdf5-1.8.14.tar.gz
  #- cd hdf5-1.8.14
  #- ./configure
  #- make -j$NUM_THREADS --silent
  #- sudo make install -j --silent
  #- cd ..
  ## Installation of newer version of OpenMPI
  #- wget http://www.open-mpi.org/software/ompi/v1.8/downloads/openmpi-1.8.4.tar.gz
  #- tar -zxf openmpi-1.8.4.tar.gz
  #- cd openmpi-1.8.4
  #- ./configure
  #- make -j$NUM_THREADS --silent
  #- sudo make install -j --silent
  #- cd ..
  - ls -l /usr/include/*mpi*
  - ls -l /usr/include/openmpi/
  - sudo ln -s /usr/include/openmpi/mpi-ext.h /usr/include/mpi-ext.h
  - sudo ln -s /usr/include/openmpi/mpif-common.h /usr/include/mpif-common.h
  - sudo ln -s /usr/include/openmpi/mpif-config.h /usr/include/mpif-config.h
  - sudo ln -s /usr/include/openmpi/mpif.h /usr/include/mpif.h
  - sudo ln -s /usr/include/openmpi/mpif-mpi-io.h /usr/include/mpif-mpi-io.h
  - sudo ln -s /usr/include/openmpi/mpi.h /usr/include/mpi.h
  - sudo ln -s /usr/include/openmpi/mpi_portable_platform.h /usr/include/mpi_portable_platform.h
  - ls -l /usr/include/*mpi*
  
install:
  - mkdir build
  - cd build
  - cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release -DCDMATH_WITH_TESTS=ON -DCDMATH_WITH_PETSC=ON ..
  - make
  - sudo make install -j --silent
  - cd ..
  
script:
  - cd build
  - make test
  - cd ..



Propellerhead Remote Mapping File					
File Format Version	1.0.0				
Control Surface Manufacturer	Digidesign				
Control Surface Model	Command8				
Map Version	1.0.0				
					
Scope	Propellerheads	Reason Master Section			
// Control Surface Item	Key	Remotable Item	Scale	Mode	Groups
Map	Fader 1		Channel 1 Level	
Map	Fader 2		Channel 2 Level	
Map	Fader 3		Channel 3 Level	
Map	Fader 4		Channel 4 Level	
Map	Fader 5		Channel 5 Level	
Map	Fader 6		Channel 6 Level	
Map	Fader 7		Channel 7 Level	
Map	Fader 8		Channel 8 Level	

Map	Rotary 1		Channel 1 Input Gain	
Map	Rotary 2		Channel 2 Input Gain	
Map	Rotary 3		Channel 3 Input Gain	
Map	Rotary 4		Channel 4 Input Gain	
Map	Rotary 5		Channel 5 Input Gain	
Map	Rotary 6		Channel 6 Input Gain	
Map	Rotary 7		Channel 7 Input Gain	
Map	Rotary 8		Channel 8 Input Gain	

Map	Solo 1		Channel 1 Solo	
Map	Solo 2		Channel 2 Solo	
Map	Solo 3		Channel 3 Solo	
Map	Solo 4		Channel 4 Solo	
Map	Solo 5		Channel 5 Solo	
Map	Solo 6		Channel 6 Solo	
Map	Solo 7		Channel 7 Solo	
Map	Solo 8		Channel 8 Solo

Map	Mute 1		Channel 1 Mute	
Map	Mute 2		Channel 2 Mute	
Map	Mute 3		Channel 3 Mute	
Map	Mute 4		Channel 4 Mute	
Map	Mute 5		Channel 5 Mute	
Map	Mute 6		Channel 6 Mute	
Map	Mute 7		Channel 7 Mute	
Map	Mute 8		Channel 8 Mute

Map	EQ 1		Channel 1 EQ On	
Map	EQ 2		Channel 2 EQ On	
Map	EQ 3		Channel 3 EQ On	
Map	EQ 4		Channel 4 EQ On	
Map	EQ 5		Channel 5 EQ On	
Map	EQ 6		Channel 6 EQ On	
Map	EQ 7		Channel 7 EQ On	
Map	EQ 8		Channel 8 EQ On

Map	Bank Right Trig		Next 8 Remote Base Channel
Map	Bank Left Trig		Previous 8 Remote Base Channel
Map	Channel Right Trig		Next Remote Base Channel
Map	Channel Left Trig		Previous Remote Base Channel

version={1,0,0}

function remote_supported_control_surfaces()
	local surfaces =
		{
			{ manufacturer="Digidesign", model="Command8",
				source="command8codec.lua", picture="command8.png",
				in_ports={{description="Input"}}, out_ports={{description="Output"}},
				has_keyboard=false,
				setup_info_text="To use the Command 8 with Remote select Stand Alone operating mode. (Button next to MIDI LEDs)" },
		}
	return surfaces
end
